<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BIGFAN Inventory Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Styles (inlined from style.css) -->
    <style>
      :root {
        --bg: #0f172a;
        --bg-elevated: #020617;
        --card: #020617;
        --accent: #22c55e;
        --accent-soft: rgba(34, 197, 94, 0.2);
        --accent-warning: #f97316;
        --accent-danger: #ef4444;
        --border-subtle: #1e293b;
        --text-main: #e5e7eb;
        --text-muted: #9ca3af;
        --text-soft: #64748b;
        --radius-lg: 18px;
        --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.4);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(circle at top left, #1e293b 0, #020617 45%);
        color: var(--text-main);
        min-height: 100vh;
      }

      body {
        display: flex;
        flex-direction: column;
      }

      /* HEADER */

      .app-header {
        padding: 16px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid var(--border-subtle);
        backdrop-filter: blur(16px);
        background: linear-gradient(
          to right,
          rgba(15, 23, 42, 0.95),
          rgba(15, 23, 42, 0.85)
        );
        position: sticky;
        top: 0;
        z-index: 20;
      }

      .app-header__left {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .app-logo {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(
          circle at 30% 20%,
          #22c55e,
          #14b8a6 60%,
          #22d3ee
        );
        box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
      }

      .app-header h1 {
        margin: 0;
        font-size: 20px;
      }

      .app-tagline {
        margin: 0;
        font-size: 12px;
        color: var(--text-soft);
      }

      .app-header__right {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .search-input {
        border-radius: 999px;
        border: 1px solid var(--border-subtle);
        padding: 8px 14px;
        background: rgba(15, 23, 42, 0.85);
        color: var(--text-main);
        min-width: 200px;
      }

      .search-input::placeholder {
        color: var(--text-soft);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 1px var(--accent-soft);
      }

      .today-label {
        font-size: 13px;
        color: var(--text-soft);
      }

      /* LAYOUT */

      .layout {
        flex: 1;
        padding: 18px 24px 32px;
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      .kpi-row {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 14px;
      }

      .middle-row,
      .bottom-row {
        display: grid;
        grid-template-columns: minmax(0, 3fr) minmax(260px, 1.1fr);
        gap: 14px;
      }

      .panel {
        background: radial-gradient(circle at top left, #111827, #020617 60%);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-subtle);
        box-shadow: var(--shadow-soft);
        overflow: hidden;
      }

      .panel__header {
        padding: 14px 18px 8px;
        border-bottom: 1px solid rgba(31, 41, 55, 0.8);
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .panel__header h2 {
        margin: 0;
        font-size: 15px;
      }

      .panel__subtitle {
        margin: 0;
        font-size: 12px;
        color: var(--text-soft);
      }

      .panel__body {
        padding: 14px 18px 16px;
      }

      .panel__body--two-col {
        display: grid;
        grid-template-columns: 1.3fr 1.3fr;
        gap: 12px;
      }

      .panel__block {
        min-width: 0;
      }

      /* KPI cards */

      .kpi-card {
        background: radial-gradient(circle at top left, #0f172a, #020617 60%);
        border-radius: var(--radius-lg);
        padding: 12px 14px;
        border: 1px solid var(--border-subtle);
        box-shadow: 0 14px 35px rgba(0, 0, 0, 0.55);
        position: relative;
        overflow: hidden;
      }

      .kpi-card::after {
        content: "";
        position: absolute;
        right: -40px;
        top: -40px;
        width: 90px;
        height: 90px;
        border-radius: 999px;
        background: radial-gradient(circle, rgba(34, 197, 94, 0.2), transparent);
        opacity: 0.8;
      }

      .kpi-card h2 {
        margin: 0;
        font-size: 13px;
        color: var(--text-soft);
      }

      .kpi-card__value {
        margin: 6px 0;
        font-size: 24px;
        font-weight: 600;
      }

      .kpi-card__hint {
        margin: 0;
        font-size: 11px;
        color: var(--text-soft);
      }

      /* Top items */

      .top-items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: 10px;
      }

      .top-item-card {
        border-radius: 12px;
        padding: 8px 9px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid var(--border-subtle);
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .top-item-title {
        font-size: 12px;
        margin: 0;
      }

      .top-item-meta {
        font-size: 11px;
        color: var(--text-soft);
        display: flex;
        justify-content: space-between;
      }

      .status-pill {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 10px;
        border-radius: 999px;
        padding: 2px 6px;
        background: rgba(15, 23, 42, 0.9);
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
      }

      /* Space usage */

      .space-row {
        margin-bottom: 10px;
      }

      .space-row-label {
        font-size: 12px;
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
        color: var(--text-soft);
      }

      .space-bar-outer {
        width: 100%;
        border-radius: 999px;
        height: 8px;
        background: #020617;
        overflow: hidden;
        border: 1px solid var(--border-subtle);
      }

      .space-bar-inner {
        height: 100%;
        border-radius: inherit;
        background: linear-gradient(to right, #22c55e, #eab308, #ef4444);
        transition: width 0.3s ease-out;
      }

      /* Table */

      .table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
      }

      .table thead {
        background: rgba(15, 23, 42, 0.95);
      }

      .table th,
      .table td {
        padding: 6px 6px;
        border-bottom: 1px solid rgba(31, 41, 55, 0.9);
        text-align: left;
      }

      .table th {
        font-weight: 500;
        color: var(--text-soft);
        font-size: 11px;
      }

      .table tbody tr:hover {
        background: rgba(15, 23, 42, 0.95);
      }

      /* Activity list */

      .activity-list {
        list-style: none;
        padding: 0;
        margin: 0;
        font-size: 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .activity-item {
        padding: 6px 8px;
        border-radius: 12px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid var(--border-subtle);
      }

      .activity-item-time {
        font-size: 10px;
        color: var(--text-soft);
      }

      /* Footer */

      .app-footer {
        padding: 10px 24px 16px;
        font-size: 11px;
        color: var(--text-soft);
        text-align: center;
      }

      /* Utilities */

      .subheading {
        font-size: 12px;
        color: var(--text-soft);
        margin: 0 0 8px;
      }

      /* Responsive */

      @media (max-width: 900px) {
        .kpi-row {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .middle-row,
        .bottom-row {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      @media (max-width: 600px) {
        .app-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }

        .search-input {
          min-width: 0;
          width: 100%;
        }

        .layout {
          padding-inline: 14px;
        }

        .kpi-row {
          grid-template-columns: minmax(0, 1fr);
        }
      }
    </style>

    <!-- Chart.js for the category donut chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header class="app-header">
      <div class="app-header__left">
        <span class="app-logo">üç∏</span>
        <div>
          <h1>BIGFAN Inventory</h1>
          <p class="app-tagline">Current stock ¬∑ visuals ¬∑ smart reorders</p>
        </div>
      </div>
      <div class="app-header__right">
        <input
          id="searchInput"
          class="search-input"
          type="search"
          placeholder="Search items‚Ä¶"
        />
        <span class="today-label" id="todayLabel"></span>
      </div>
    </header>

    <main class="layout">
      <!-- TOP: KPI cards -->
      <section class="kpi-row">
        <article class="kpi-card" id="kpiTotalItems">
          <h2>Total items</h2>
          <p class="kpi-card__value">0</p>
          <p class="kpi-card__hint">All active products</p>
        </article>

        <article class="kpi-card" id="kpiLowStock">
          <h2>Low stock</h2>
          <p class="kpi-card__value">0</p>
          <p class="kpi-card__hint">Below minimum level</p>
        </article>

        <article class="kpi-card" id="kpiOutOfStock">
          <h2>Out of stock</h2>
          <p class="kpi-card__value">0</p>
          <p class="kpi-card__hint">Zero units left</p>
        </article>

        <article class="kpi-card" id="kpiSpaceUsed">
          <h2>Space used</h2>
          <p class="kpi-card__value">0%</p>
          <p class="kpi-card__hint">Weighted across all locations</p>
        </article>
      </section>

      <!-- MIDDLE: visuals -->
      <section class="middle-row">
        <section class="panel panel--wide">
          <header class="panel__header">
            <h2>Stock by category</h2>
          </header>
          <div class="panel__body panel__body--two-col">
            <div class="panel__block">
              <canvas id="categoryChart" aria-label="Stock by category"></canvas>
            </div>

            <div class="panel__block">
              <h3 class="subheading">Top items</h3>
              <div id="topItemsGrid" class="top-items-grid"></div>
            </div>
          </div>
        </section>

        <aside class="panel panel--narrow">
          <header class="panel__header">
            <h2>Space usage</h2>
          </header>
          <div class="panel__body" id="spaceUsageList">
            <!-- Filled by JS -->
          </div>
        </aside>
      </section>

      <!-- BOTTOM: Suggested orders + Activity -->
      <section class="bottom-row">
        <section class="panel panel--wide">
          <header class="panel__header">
            <h2>Suggested next orders</h2>
            <p class="panel__subtitle">
              Based on current stock, minimum levels and per-item capacity.
            </p>
          </header>
          <div class="panel__body">
            <table class="table" id="suggestedOrdersTable">
              <thead>
                <tr>
                  <th>Item</th>
                  <th>Category</th>
                  <th>On hand</th>
                  <th>Min</th>
                  <th>Max</th>
                  <th>Suggested</th>
                  <th>Reason</th>
                </tr>
              </thead>
              <tbody>
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </section>

        <aside class="panel panel--narrow">
          <header class="panel__header">
            <h2>Stock updates</h2>
          </header>
          <div class="panel__body">
            <ul class="activity-list" id="activityList">
              <!-- Filled by JS -->
            </ul>
          </div>
        </aside>
      </section>
    </main>

    <footer class="app-footer">
      <small>BIGFAN Inventory ¬∑ Demo dashboard</small>
    </footer>

    <!-- JS (inlined from app.js) -->
    <script>
      // ---------- Data ----------

      const items = [
        // Wines
        {
          id: "alo-vert",
          name: "Alo Vert",
          category: "wine",
          type: "white",
          location: "wine_shelf",
          current: 21,
          min: 30,
          max: 60,
          avgDailyUsage: 4
        },
        {
          id: "la-semilla",
          name: "La Semilla Gavi",
          category: "wine",
          type: "white",
          location: "wine_shelf",
          current: 11,
          min: 24,
          max: 60,
          avgDailyUsage: 3
        },
        {
          id: "el-prat",
          name: "El Prat",
          category: "wine",
          type: "red",
          location: "wine_shelf",
          current: 20,
          min: 24,
          max: 60,
          avgDailyUsage: 3
        },
        {
          id: "andillan",
          name: "Andillan",
          category: "wine",
          type: "red",
          location: "wine_shelf",
          current: 12,
          min: 18,
          max: 60,
          avgDailyUsage: 2
        },

        // Spirits & liqueurs
        {
          id: "vodka",
          name: "Vodka",
          category: "spirits",
          type: "spirit",
          location: "spirits_shelf",
